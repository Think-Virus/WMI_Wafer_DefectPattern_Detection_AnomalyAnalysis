{
  "case_id": "20260115_234132_df381274",
  "query": {
    "df_index": 381274,
    "true_label": "Scratch",
    "model_top3": [
      {
        "rank": 1,
        "class": "Loc",
        "idx": 3,
        "prob": 0.9813470840454102
      },
      {
        "rank": 2,
        "class": "Edge-Loc",
        "idx": 1,
        "prob": 0.007891243323683739
      },
      {
        "rank": 3,
        "class": "Edge-Ring",
        "idx": 2,
        "prob": 0.004747641272842884
      }
    ],
    "ood": {
      "method": "energy",
      "msp": 0.9813470840454102,
      "energy": -5.122862339019775,
      "threshold": -5.165189266204834,
      "temperature": 1.0,
      "is_ood": true
    }
  },
  "known_topk": [
    {
      "rank": 1,
      "df_index": 304242,
      "y": 3,
      "label": "Loc",
      "cosine_sim": 0.9951452612876892
    },
    {
      "rank": 2,
      "df_index": 777535,
      "y": 3,
      "label": "Loc",
      "cosine_sim": 0.9939591288566589
    },
    {
      "rank": 3,
      "df_index": 291830,
      "y": 3,
      "label": "Loc",
      "cosine_sim": 0.9934781193733215
    },
    {
      "rank": 4,
      "df_index": 221955,
      "y": 3,
      "label": "Loc",
      "cosine_sim": 0.9932950735092163
    },
    {
      "rank": 5,
      "df_index": 322344,
      "y": 3,
      "label": "Loc",
      "cosine_sim": 0.9921738505363464
    }
  ],
  "unknown_topk": [
    {
      "df_index": 242166,
      "cosine_sim": 0.9953063726425171,
      "true_label": "Scratch",
      "rank": 1,
      "cluster_id": 1
    },
    {
      "df_index": 242121,
      "cosine_sim": 0.9936482906341553,
      "true_label": "Scratch",
      "rank": 2,
      "cluster_id": 1
    },
    {
      "df_index": 247171,
      "cosine_sim": 0.9935131669044495,
      "true_label": "Scratch",
      "rank": 3,
      "cluster_id": 1
    },
    {
      "df_index": 382434,
      "cosine_sim": 0.9933746457099915,
      "true_label": "Scratch",
      "rank": 4,
      "cluster_id": 1
    },
    {
      "df_index": 334261,
      "cosine_sim": 0.9930601119995117,
      "true_label": "Scratch",
      "rank": 5,
      "cluster_id": 1
    }
  ],
  "cluster": {
    "available": true,
    "dataset": "unknown",
    "method": "kmeans",
    "cluster_id": 1,
    "rep_df_index": 281674,
    "meta": {
      "source_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_embeddings.npz",
      "saved_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_cluster.npz",
      "saved_reps_json": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_cluster_reps.json",
      "method": "kmeans",
      "params": {
        "k": 2,
        "seed": 42
      },
      "num_samples": 1748,
      "num_clusters_excluding_noise": 2,
      "noise_count": 0,
      "cluster_counts_top10": {
        "1": 1238,
        "0": 510
      }
    },
    "cluster_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_cluster.npz"
  },
  "cluster_rank_top5": [
    {
      "rank": 1,
      "type": "unknown_cluster",
      "name": "unknown_cluster:1",
      "prob": 0.6127195358276367,
      "cosine_sim": 0.9461244940757751,
      "rep_df_index": 281674,
      "count": 1238
    },
    {
      "rank": 2,
      "type": "known_class",
      "name": "known:Loc",
      "prob": 0.30204111337661743,
      "cosine_sim": 0.9107572436332703,
      "rep_df_index": 713494,
      "count": 1500
    },
    {
      "rank": 3,
      "type": "unknown_cluster",
      "name": "unknown_cluster:0",
      "prob": 0.08007019013166428,
      "cosine_sim": 0.8443742990493774,
      "rep_df_index": 279840,
      "count": 510
    },
    {
      "rank": 4,
      "type": "known_class",
      "name": "known:Center",
      "prob": 0.003742425935342908,
      "cosine_sim": 0.6912158131599426,
      "rep_df_index": 624300,
      "count": 1500
    },
    {
      "rank": 5,
      "type": "known_class",
      "name": "known:Edge-Loc",
      "prob": 0.0012477223062887788,
      "cosine_sim": 0.6362950801849365,
      "rep_df_index": 62797,
      "count": 1500
    }
  ],
  "cluster_rank_tau": 0.05,
  "paths": {
    "lswmd_pkl": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\data\\LSWMD_small.pkl.gz",
    "ckpt": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\models\\20260111_074510_resnet18_R64_polar4_K6_best_e05_weights.pt",
    "known_db": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\known_embeddings.npz",
    "unknown_db": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_embeddings.npz",
    "cluster_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_cluster.npz"
  },
  "ood": {
    "method": "energy",
    "msp": 0.9813470840454102,
    "energy": -5.122862339019775,
    "threshold": -5.165189266204834,
    "temperature": 1.0,
    "is_ood": true
  }
}