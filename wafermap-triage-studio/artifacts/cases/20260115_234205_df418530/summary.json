{
  "case_id": "20260115_234205_df418530",
  "query": {
    "df_index": 418530,
    "true_label": null,
    "model_top3": [
      {
        "rank": 1,
        "class": "Edge-Loc",
        "idx": 1,
        "prob": 0.9269222021102905
      },
      {
        "rank": 2,
        "class": "Loc",
        "idx": 3,
        "prob": 0.044827476143836975
      },
      {
        "rank": 3,
        "class": "Edge-Ring",
        "idx": 2,
        "prob": 0.019910765811800957
      }
    ],
    "ood": {
      "method": "energy",
      "msp": 0.9269222021102905,
      "energy": -4.23314094543457,
      "threshold": -5.165189266204834,
      "temperature": 1.0,
      "is_ood": true
    }
  },
  "known_topk": [
    {
      "rank": 1,
      "df_index": 756581,
      "y": 1,
      "label": "Edge-Loc",
      "cosine_sim": 0.9782764911651611
    },
    {
      "rank": 2,
      "df_index": 770217,
      "y": 1,
      "label": "Edge-Loc",
      "cosine_sim": 0.9753736257553101
    },
    {
      "rank": 3,
      "df_index": 739824,
      "y": 1,
      "label": "Edge-Loc",
      "cosine_sim": 0.9752234220504761
    },
    {
      "rank": 4,
      "df_index": 790250,
      "y": 1,
      "label": "Edge-Loc",
      "cosine_sim": 0.9744750261306763
    },
    {
      "rank": 5,
      "df_index": 787136,
      "y": 1,
      "label": "Edge-Loc",
      "cosine_sim": 0.9741183519363403
    }
  ],
  "unknown_topk": [
    {
      "df_index": 650009,
      "cosine_sim": 0.9825258255004883,
      "true_label": "Scratch",
      "rank": 1,
      "cluster_id": 1
    },
    {
      "df_index": 286983,
      "cosine_sim": 0.9823809862136841,
      "true_label": "Scratch",
      "rank": 2,
      "cluster_id": 1
    },
    {
      "df_index": 770179,
      "cosine_sim": 0.9816948175430298,
      "true_label": "Scratch",
      "rank": 3,
      "cluster_id": 1
    },
    {
      "df_index": 692891,
      "cosine_sim": 0.9775034189224243,
      "true_label": "Scratch",
      "rank": 4,
      "cluster_id": 1
    },
    {
      "df_index": 679550,
      "cosine_sim": 0.9737136960029602,
      "true_label": "Scratch",
      "rank": 5,
      "cluster_id": 1
    }
  ],
  "cluster": {
    "available": true,
    "dataset": "unlabeled",
    "method": "unknown",
    "cluster_id": 3,
    "rep_df_index": 84824,
    "meta": {
      "created_at": "2026-01-12 00:32:08",
      "input_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unlabeled_embeddings.npz",
      "method": "kmeans",
      "k": 12,
      "seed": 42,
      "filters": {
        "min_conf": 0.7,
        "novel_pct": 10.0,
        "max_known_sim": null,
        "pred_label": null
      },
      "counts": {
        "total": 5000,
        "filtered": 401,
        "clusters": 12
      }
    },
    "cluster_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unlabeled_cluster.npz",
    "assign_mode": "nearest_rep",
    "assign_cosine_sim": 0.9636229872703552
  },
  "cluster_rank_top5": [
    {
      "rank": 1,
      "type": "known_class",
      "name": "known:Edge-Loc",
      "prob": 0.8938041925430298,
      "cosine_sim": 0.9067455530166626,
      "rep_df_index": 62797,
      "count": 1500
    },
    {
      "rank": 2,
      "type": "unknown_cluster",
      "name": "unknown_cluster:1",
      "prob": 0.08062569797039032,
      "cosine_sim": 0.7864620685577393,
      "rep_df_index": 281674,
      "count": 1238
    },
    {
      "rank": 3,
      "type": "known_class",
      "name": "known:Loc",
      "prob": 0.02151615545153618,
      "cosine_sim": 0.7204114198684692,
      "rep_df_index": 713494,
      "count": 1500
    },
    {
      "rank": 4,
      "type": "known_class",
      "name": "known:Edge-Ring",
      "prob": 0.001902211457490921,
      "cosine_sim": 0.5991220474243164,
      "rep_df_index": 300275,
      "count": 1500
    },
    {
      "rank": 5,
      "type": "unknown_cluster",
      "name": "unknown_cluster:0",
      "prob": 0.0010399606544524431,
      "cosine_sim": 0.5689303278923035,
      "rep_df_index": 279840,
      "count": 510
    }
  ],
  "cluster_rank_tau": 0.05,
  "paths": {
    "lswmd_pkl": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\data\\LSWMD_small.pkl.gz",
    "ckpt": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\models\\20260111_074510_resnet18_R64_polar4_K6_best_e05_weights.pt",
    "known_db": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\known_embeddings.npz",
    "unknown_db": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_embeddings.npz",
    "cluster_npz": "C:\\Users\\user\\PycharmProjects\\WMI_Wafer_DefectPattern_Detection_AnomalyAnalysis\\wafermap-triage-studio\\artifacts\\emb_db\\unknown_cluster.npz"
  },
  "ood": {
    "method": "energy",
    "msp": 0.9269222021102905,
    "energy": -4.23314094543457,
    "threshold": -5.165189266204834,
    "temperature": 1.0,
    "is_ood": true
  }
}